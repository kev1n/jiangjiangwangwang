{% for i in files %}
    <div class="file" width="100%" height="200px" style="border: 1px solid black" draggable="true" filename = "{{i}}">
        <p onclick='getContentsOfFile("{{i}}")'>{{i}}</p>

        <a href='{{url_for("download", username=username, filename=i)}}' download id="download">Download</a>
    
        <button onclick='deleteFile("{{i}}")'>Delete</button>
    
        <button onclick='populateModalContents("{{i}}")' type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-{{i}}">Edit</button>
    
        <!-- Modal -->
        <div class="modal fade" id="modal-{{i}}" tabindex="-1" aria-labelledby="modal-{{i}}Label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-{{i}}Label">Edit {{i}}</h5>
                <button onclick='runCode("{{i}}")' id="run-{{i}}">Run</button>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="d=flex">
                    <!--We put the contents of the file in this textarea-->
                    <div id="modal-{{i}}-contents" style="height:400px;border:1px solid black;">

                    </div>
                    <div id="modal-{{i}}-terminal" style="height:400px;border:1px solid black;">

                    </div>
                </div>
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button onclick='editFile("{{i}}")' type="button" class="btn btn-primary" data-bs-dismiss="modal">Save changes</button>
            </div>
            </div>
        </div>
        </div>
        
        <br>
        <!-- rename the file form-->
        <label for="rename">Rename</label>
        <input type="text" id="file-form-{{i}}" name="rename" placeholder="New Name">
        <button onclick='renameFile("{{i}}")'>Rename</button>
    </div>

{% endfor %}
